<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title> Megalith 2023 | The Annual Fest of Civil Engineering | IIT Kharagpur  </title>
  <meta name="title" content="Megalith 2023 IIT Kharagpur">
  <meta name="description" content="Megalith 2023 | The Annual Tech-fest of Civil Engineering Department | IIT Kharagpur">
  <meta content="Megalith 2023, Megalith, Megalith IIT Kharagpur, Megalith 2023 IIT Kharagpur, Megalith IIT Kharagpur 2023" name="keywords">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="shortcut icon" href="l.png" />
  <link rel="icon" href="l.png">
  <link rel="shortcut icon" href="https://2022.megalith.co.in/homeimages/logoi.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="contactus.css">
    <link rel="stylesheet" href="buttons.css">
</head>

<body class="hold-transition skin-blue sidebar-mini" >
  
    <div class="wrapper">
      <header class="main-header">
        <a href="index2.html" class="logo">
          <span class="logo-mini"><b>LAB</b></span>
          <span class="logo-lg"><b></b>My Profile</span>
        </a>
        <nav class="navbar navbar-static-top" role="navigation">
          <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
            <span class="sr-only">Toggle navigation</span>
          </a>
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
              
              <li class="dropdown user user-menu">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <img src="https://vignette3.wikia.nocookie.net/nation/images/6/61/Emblem_person_blue.png/revision/latest?cb=20120218131529" class="user-image" alt="User Image">
                  <span class="hidden-xs"><%=data.username %></span>
                </a>
              </li>
            </ul>
          </div>
        </nav>
      </header>
      <aside class="main-sidebar">
        <section class="sidebar">
          <ul class="sidebar-menu" data-widget="tree">
            <li class="header">NAVIGATION</li>
            <li class="active treeview">
              <a href="#">
                <i class="fa fa-dashboard"></i> <span>Dashboard</span>
              </a>
            </li>
            <li >
              <a href="" onclick="registerevent()">
                <i class="fa-regular fa-calendar"></i> <span>Apply for Events</span>
              </a>
            </li>
            <li >
              <a href="" onclick="registerworkshop()">
                <i class="fa-solid fa-building-user"></i></i> <span>Apply for Workshop</span>
              </a>
            </li>
 <li >
              <a href="" onclick="registereventandworkshop()">
                <i class="fa-regular fa-calendar"></i></i> <span>For both events & Workshop</span>
              </a>
            </li>

             <li>
              <a href="/comingsoon">
                <i class="fa fa-question"></i> <span>Why this theme</span>
              </a>
            </li>
             <li >
              <a href="https://2022.megalith.co.in/" target="_blank">
                <i class="fa fa-location-arrow"></i> <span>Visit 2022 website</span>
              </a>
            </li>
            <li >
                <a href="/signup">
                  <i class="fa fa-cogs"></i> <span>Log out</span>
                </a>
              </li>
            
          </ul>
        </section>
      </aside>
      <div class="content-wrapper" style="height: 87vh; overflow: scroll;">
        <section class="content ">
      <div class="box box-primary">
                <div class="box-body box-profile">
                  <img id="avatar" class="profile-user-img img-responsive img-circle" src="https://www.w3schools.com/w3css/img_avatar3.png" alt="User profile picture">
    
                  <h3 class="profile-username text-center"><%= data.name %></h3>
    
                  <p class="text-muted text-center"><span id="countries"></span>,<span id="states"></span>,<span id="cities"></span></p>
                  <p class="text-muted text-center"><%= data.mobileNumber %></p>
                  <p class="text-muted text-center"><%= data.email %></p>
                  <p class="text-muted text-center"><%= data.college %></p>
                  <p class="text-muted text-center"><%= data.username %></p>
                  <p class="text-muted text-center">Participant id :- <span id="participantid"></span></p>
                  <p class="text-muted text-center userinfo"> You have successfully logged in!</p>
                  <p id="text1" class="text-muted text-center userinfo"></p>
                  <p id="text2" class="text-muted text-center userinfo"><span id="textmipid"></span></p>
                  <p class="text-muted text-center userinfo">You can now register for our events and workshops by clicking on card below</p>
                  
                  <script>
                    let countryname = '<%= data.country %>'
                    let statename = '<%= data.state %>'
                    let cityname = '<%= data.city %>'
                    const regionNames = new Intl.DisplayNames(
                    ['en'], {type: 'region'}
                    );
                    country=regionNames.of(countryname);
                    state = regionNames.of(statename);
                    document.getElementById("countries").innerHTML= country; 
                    document.getElementById("states").innerHTML= state; 
                    document.getElementById("cities").innerHTML= cityname; 
                    let gender = '<%= data.gender %>'
                    if (gender === 'male'){
                      document.getElementById("avatar").src = "https://www.w3schools.com/howto/img_avatar.png";
                    }
                    if (gender === 'female'){
                      document.getElementById("avatar").src = "https://www.w3schools.com/howto/img_avatar2.png";
                    }
                    let mipid = '<%= data.getmipid %>'
                    if (mipid != 'No'){
                      document.getElementById("text1").innerHTML = 'The Megalith Intern you are registered under is as follows'
                      document.getElementById("text2").innerHTML = 'MIP ID :- ' + mipid;
                    }
                    let id = '<%= data.id %>'
                    let participantid1 = id.slice(-5);
                    let participantid2 = 'PR'
                    let participantid3 = participantid2 + participantid1;
                    participantid3 = participantid3.toUpperCase();
                    document.getElementById("participantid").innerHTML = participantid3;
                    console.log(participantid3);
                    console.log(participantid1);
                    function registerevent(){
                      fetch('/registerforevent', {
                      method: "POST",
                      body: JSON.stringify({
                      test:"123",
                      userid : id,
                      }),
                      headers : {
                      "Content-type" : "application/json"
                           }
                      }).then(result => result.json())
                      .then(data => {
                        if(data.success){
                          alert("Successfully registered");
                          window.open('https://www.meraevents.com/event/megalithevents?ucode=organizer', '_blank');
                        }else if(!data.success){
                          alert("User already exist");
                        }else {
                          alert("Some error occured");
                        }
                      }) 
                    }
                    function registerworkshop(){
                      fetch('/registerforworkshop', {
                      method: "POST",
                      body: JSON.stringify({
                      test:"123",
                      userid : id,
                      }),
                      headers : {
                      "Content-type" : "application/json"
                           }
                      })
                      window.open('https://www.meraevents.com/event/megalith-workshop?ucode=organizer', '_blank');
                    }
                    function registereventandworkshop(){
                      fetch('/registereventandworkshop', {
                      method: "POST",
                      body: JSON.stringify({
                      test:"123",
                      userid : id,
                      }),
                      headers : {
                      "Content-type" : "application/json"
                           }
                      })
                      window.open('https://www.meraevents.com/event/megalith-events-workshop?ucode=organizer', '_blank');
                    }
                  </script>                 
                </div>
              </div>
              </section>
              <section class="registercontent">
                <section class="card" aria-label="card text">
                  <div style="background-image: url(gwaliorfort.jpg); background-size: cover;" class="card__front card__front1">
                    <header class="card__header">
                      <h1 style="font-size: 30px; text-align: center;" class="card__title">Register for all Events</h1>
                    </header>
                  </div>
                  <button class="card__back">
                    <div class="btn" onclick="registerevent()">Click here to apply</div>
                  </button>
                </section>
                <section class="card" aria-label="card text">
                  <div style="background-image: url(golcondafort.jpg); background-size: cover;" class="card__front card__front2">
                    <header class="card__header">
                      <h1 style="font-size: 30px; text-align: center;" class="card__title">Register for Workshop</h1>
                    </header>
                  </div>
                  <button class="card__back">
                    <div class="btn" onclick="registerworkshop()">Click here to apply</div>
                  </button>
                </section>
                <section class="card" aria-label="card text">
                  <div style="background-image: url(images.jpg); background-size: cover;" class="card__front card__front2">
                    <header class="card__header">
                      <h1 style="font-size: 30px; text-align: center;" class="card__title">Register for all Events and Workshop</h1>
                    </header>
                  </div>
                  <button class="card__back">
                    <div class="btn" onclick="registereventandworkshop()">Click here to apply</div>
                  </button>
                </section>
              </div>
      </div>
      <script src="https://kit.fontawesome.com/9b5d93182d.js" crossorigin="anonymous"></script>    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <script src="dashboard.js"></script>
    </body>
    
</html>